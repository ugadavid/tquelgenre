<!DOCTYPE html>
<html lang="fr">
    <head> 
        <title> TQuelGenre - Tableau de bord </title>
        <meta charset="utf-8">
        <link href="styleboard_ok.css" rel="stylesheet">
        <link href="styleboard_.css" rel="stylesheet">
        <script src="debug.js" defer></script>
        <script src="user.js" defer></script>
        <script src="modal.js" defer></script>
    </head>

    <body>
        <div class="wrapper">
        <header>
            <div id="tdb_header1_all">
                <div class="tdb_header1">
                    <a href="index.html"> <img src="ressources/logo.png" alt="Logo TQG" title="Logo" class="tdb_logo"> </a>
                    <div>
                        <a href="javascript:void(0);" onclick="openModal('popup_profile.html')">Mon profil</a>
                        <a href="javascript:void(0);" onclick="resetUser()"> D√©connexion </a>
                    </div>
                </div>
            </div>

            <div id="tdb_header_anderson_all">
                <div id="tdb_header_anderson">
                    <div class="tdb_header2">
                        <nav>
                            <a href="tableau_de_bord.html"> üìäTableau de bord </a>
                            <a href="categorie.html"> üßÆCat√©gories </a>
                            <a href="jeux.html"> üïπÔ∏èJeux </a>
                            <a href="regles.html"> üìöRessources </a>
                        </nav>

                        <div class="tdb_header2-B">
                            <div class="tdb_chercheur-container">
                                <input type="text" id="tdb_chercheur" placeholder="üîç Rechercher..." oninput="tdb_functionne_recherche()"> <!-- Quand on clique dessus la fonctionne s'active -->
                                <ul id="tdb_resultats_chercheur">
                                    <li> Sant√© </li>
                                    <li> Amour </li>
                                    <li> Le corps </li>
                                    <li> Les v√™tements </li>
                                    <li> La famille </li>
                                    <li> Le tourisme     </li>
                                    <li> Les repas </li>
                                    <li> La m√©t√©o </li>
                                </ul>
                            </div>
                            <h1>Liste des mots par cat√©gorie</h1>
                        </div>
                    </div>

                    <div id="tdb_container_avatar"> 
                        <img src="ressources/avatars_edit/woman_7.png" alt="Avatar apprenant" title="avatar">
                    </div>
                </div>
            </div>
        </header>




        <main>
            
            <form id="body_mots">
                <div class="wordlist-container">
                    <p class="description">S√©lectionne une cat√©gorie et coche les mots pour ta liste personalis√©e. Choisis au moins 10 mots.</p>
            
                    <!-- Liste d√©roulante -->
                    <div class="select-container">
                        <select name="categorie" id="categorie" onchange="loadWordsByCategory()">
                            <option value="3">L'amour</option>
                            <option value="14">La cuisine</option>
                            <option value="7">La sant√©</option>
                            <option value="22">La m√©t√©o</option>
                            <option value="2">La famille</option>
                            <option value="26">Le tourisme</option>
                            <option value="6">Le corps</option>
                            <option value="9">Les v√™tements</option>
                        </select>
                    </div>
            
                    <div class="word-list">
                        <div class="columns-container">
                            <div class="column"></div>
                            <div class="column"></div>
                            <div class="column"></div>
                            <div class="column"></div>
                        </div>
                    </div>
                        <div id="jaichoisi">
                            <button class="bouton"><strong>J'ai choisi mes mots</strong></button>
                        </div>
            </form>

        </main>

        



        <footer>
            <div id="footer_all">
                <a href="mentions_legales.html" class="footer_page1"> Mentions l√©gales </a>
                <a href="contacts.html" class="footer_page2"> Contacts </a>
                <a href="plan_du_site.html" class="footer_page3"> Plan du site </a>
                <a href="credits_et_sources.html" class="footer_page4"> Cr√©dits et sources </a>
            </div>
        </footer>

    </div>
        <script src="scriptboard.js"></script>


        <script>
            window.addEventListener('DOMContentLoaded', function() {                
                showUser();            // Affiche l'utilisateur dans la fen√™tre de debug
                checkConnection();     // V√©rifie si l'utilisateur est connect√©
            });
        </script>


<script>
    function loadWordsByCategory() {
        const categoryId = document.getElementById('categorie').value;
        const columns = document.querySelectorAll('.column');

        // Vider les colonnes avant d'ajouter de nouveaux mots
        columns.forEach(column => column.innerHTML = '');

        // Appel de l'API avec le bon `categorieId`
        fetch(`http://127.0.0.1:8080/api/api/getWords.php?categorieId=${categoryId}`)
            .then(response => response.json())
            .then(data => {
                const itemsPerColumn = Math.ceil(data.length / columns.length);  // Nb d'items par colonne

                data.forEach((word, index) => {
                    const label = document.createElement('label');
                    const checkbox = document.createElement('input');

                    checkbox.type = 'checkbox';
                    checkbox.id = word.mot;

                    // Ajoute l'article devant le mot
                    label.innerHTML = `${word.article} ${word.mot}`;
                    label.prepend(checkbox);

                    // R√©partit √©quitablement les mots dans les colonnes
                    const columnIndex = Math.floor(index / itemsPerColumn);
                    columns[columnIndex].appendChild(label);
                });
            })
            .catch(error => console.error('Erreur lors de l\'appel API:', error));
    }

    // Charger les mots par d√©faut pour la premi√®re cat√©gorie
    document.addEventListener('DOMContentLoaded', loadWordsByCategory);
</script>



    </body>
</html>
      
